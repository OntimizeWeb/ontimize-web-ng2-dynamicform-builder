<mat-tree fxFlex
  [dataSource]="dataSource" [treeControl]="treeControl" 
  [id]="uId"  
  cdkDropList 
  (cdkDropListDropped)="drop($event)">

  <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle
    cdkDrag 
    [cdkDragData]="node"
    (mouseenter)="dragHover(node)" 
    (mouseleave)="dragHoverEnd(node)" 
    (cdkDragStarted)="dragStart($event)"
    (cdkDragReleased)="dragEnd($event)">
    
    <div class="components-tree-drag-preview" *cdkDragPreview></div>

    <tree-leaf [node]="node"
      [treeControl]="treeControl" 
      (deleteLeaf)="deleteNode($event)" 
      (click)="clickLeaf(node)">
    </tree-leaf>
    
  </mat-tree-node>

  <mat-tree-node *matTreeNodeDef="let node;when: hasChild"
    cdkDrag 
    [cdkDragData]="node"
    (mouseenter)="dragHover(node)" 
    (mouseleave)="dragHoverEnd(node)" 
    (cdkDragStarted)="dragStart($event)"
    (cdkDragReleased)="dragEnd($event)">

    <div class="components-tree-drag-preview" *cdkDragPreview></div>

    <tree-leaf [node]="node"
      [treeControl]="treeControl" 
      (deleteLeaf)="deleteNode($event)" 
      (click)="clickLeaf(node)">
    </tree-leaf>

  </mat-tree-node>
</mat-tree>